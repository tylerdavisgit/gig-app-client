(this["webpackJsonpgig-app-client"]=this["webpackJsonpgig-app-client"]||[]).push([[0],{39:function(e,t,n){e.exports=n(69)},44:function(e,t,n){},46:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(35),i=n.n(o),c=(n(44),n(12)),l=n(11),u=n.n(l),s=n(15),d=(n(46),n(10)),p=n.n(d),g=n(1),m=Object(g.g)((function(){var e=Object(a.useContext)(H);console.log(e);var t=e.activeUser.user;return console.log(t),r.a.createElement(g.a,{to:"/login"})})),h=n(16),f=n(17),b=n(4),v="",E="http://localhost:3000/",x="localhost"===window.location.hostname?E:v;function w(e){var t=Object(a.useContext)(H),n=t.activeUser,o=t.setActiveUser;console.log(n.loggedInStatus),console.log(n.user);var i=Object(a.useState)({email:"",password:"",password_confirmation:"",registrationErrors:""}),l=Object(c.a)(i,2),u=l[0],s=l[1],d=function(e){console.log(e.target.value),s(Object(f.a)(Object(f.a)({},u),{},Object(h.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),p.a.post("".concat(x,"/registrations"),{user:{email:u.email,password:u.password,email_confirmation:u.email_confirmation}},{withCredentials:!0}).then((function(t){console.log(t),o({loggedInStatus:"LOGGED_IN",user:t.data.user}),e.history.push("/month"),s({email:"",password:"",password_confirmation:"",registrationErrors:""})})).catch(console.error)}},r.a.createElement("input",{onChange:d,type:"email",name:"email",placeholder:"Email",value:u.email,required:!0}),r.a.createElement("input",{onChange:d,type:"password",name:"password",placeholder:"Password",value:u.password,required:!0}),r.a.createElement("input",{onChange:d,type:"password_confirmation",name:"password_confirmation",placeholder:"Confirm Password",value:u.password_confirmation,required:!0}),r.a.createElement("button",{type:"submit"},"Sign Up!"),r.a.createElement(b.b,{to:"/"},"Cancel")))}function O(e){var t=Object(a.useContext)(H),n=t.activeUser,o=t.setActiveUser,i=Object(a.useState)({email:"",password:"",LoginErrors:""}),l=Object(c.a)(i,2),d=l[0],m=l[1],v=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(x,"/logout"),{withCredentials:!0}).then((function(e){console.log("LOGGED OUT")})).catch((function(e){console.log("logout error",e)}));case 2:o({loggedInStatus:"NOT_LOGGED_IN",user:{}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){console.log(e.target.value),m(Object(f.a)(Object(f.a)({},d),{},Object(h.a)({},e.target.name,e.target.value)))};return n.user.email?r.a.createElement(g.a,{to:"/month"}):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Gig"),r.a.createElement("h2",null," Login"),r.a.createElement("h5",null,"Or click sign up to get started"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),p.a.post("".concat(x,"/sessions"),{user:{email:d.email,password:d.password}},{withCredentials:!0}).then((function(t){console.log("res from login - ",t),o({loggedInStatus:"LOGGED_IN",user:t.data.user}),e.history.push("/month"),m({email:"",password:"",LoginErrors:""})})).catch(console.error)}},r.a.createElement("input",{onChange:E,type:"email",name:"email",placeholder:"Email",value:d.email,required:!0}),r.a.createElement("input",{onChange:E,type:"password",name:"password",placeholder:"Password",value:d.password,required:!0}),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("button",{onClick:v},"Logout"))),r.a.createElement(b.b,{to:"/signup"},"Sign Up")))}var j=n(14),y=n(8),_=n(9);function S(){var e=Object(y.a)(["\n  cursor: pointer;\n  font-size: 35px;\n  height: 50px;\n  width: 50px;\n  border: 3px solid lightgray;\n  border-radius: 30px;\n  div {\n    margin-top: 2px;\n  }\n"]);return S=function(){return e},e}function D(){var e=Object(y.a)(["\n  cursor: pointer;\n  font-size: 60px;\n  height: 50px;\n  width: 50px;\n  border: 3px solid lightgray;\n  border-radius: 30px;\n  div {\n    margin-top: -14px;\n  }\n"]);return D=function(){return e},e}function G(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 15px;\n  height: 20%;\n  margin-bottom: 10px;\n  margin-top: auto;\n"]);return G=function(){return e},e}function N(){var e=Object(y.a)(["\n  position: absolute;\n  top: 33%;\n  left: 0;\n  width: 100%;\n  opacity: 0.8;\n  font-weight: bold;\n  text-shadow: 1px 0.5px 0.5px darkgrey;\n  text-align: left;\n  color: black;\n  cursor: pointer;\n  border-radius: 2px;\n  font-size: 1em;\n  z-index: 10000;\n  background-color: lightgrey;\n  font-size: 0.6em;\n  overflow: hidden;\n  .gig-title {\n    display: flex;\n    flex-wrap: no-wrap;\n    flex-direction: row;\n  }\n"]);return N=function(){return e},e}function k(){var e=Object(y.a)(["\n      border: 2px solid black;\n    "]);return k=function(){return e},e}function C(){var e=Object(y.a)(["\n  width: 100%;\n  position: relative;\n  height: 8vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border: 2px solid lightgray;\n  font-size: 14px;\n  .days-of-week {\n    font-size: 20px;\n  }\n  .calendar-nums {\n    font-size: 1em;\n    margin-right: -45%;\n    margin-top: -40%;\n    color: grey;\n  }\n  p {\n    color: white;\n  }\n\n  ","\n"]);return C=function(){return e},e}function I(){var e=Object(y.a)(["\n  width: 97%;\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  grid-gap: 1%;\n  justify-content: center;\n  align-items: center;\n  margin: auto;\n"]);return I=function(){return e},e}function L(){var e=Object(y.a)(["\n  width: 100%;\n  max-width: 900px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: auto;\n"]);return L=function(){return e},e}function U(){var e=Object(y.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  padding: 10px 10px 5px 10px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  margin-bottom: 10px;\n  height: 10vh;\n  #header-year {\n    font-size: 25px;\n  }\n  #gigs {\n    margin-top: 5px;\n  }\n  a {\n    color: lightgrey;\n    text-decoration: none;\n    font-size: 40px;\n  }\n  #burger {\n    display: flex;\n    flex-direction: column;\n    .burger-span {\n      width: 30px;\n      height: 2px;\n      border: 2px solid lightgrey;\n      background-color: lightgrey;\n      margin-top: 5px;\n    }\n  }\n"]);return U=function(){return e},e}function T(){var e=Object(y.a)(["\n  min-height: 100vh;\n  width: 100vw;\n  box-shadow: 2px 2px 2px #eee;\n  background-image: radial-gradient(ellipse, black, rgb(25, 25, 25));\n  color: lightgrey;\n  font-family: helvetica, sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  justify-items: center;\n"]);return T=function(){return e},e}var z=_.b.div(T()),F=_.b.div(U()),M=_.b.div(L()),Y=_.b.div(I()),A=_.b.div(C(),(function(e){return e.isToday&&Object(_.a)(k())})),q=_.b.div(N()),J=_.b.div(G()),P=_.b.div(D()),$=_.b.div(S());function B(){var e=Object(a.useContext)(H).userGigs;console.log(e);var t=function(e){var t=[];return e.forEach((function(e){t.push({client:e.client,client_contact:e.client_contact,created_at:e.created_at,date:e.date.split("-").map((function(e){return parseInt(e)})),id:e.id,location:e.location,price:e.price,time:e.time,title:e.title,updated_at:e.updated_at,user_id:e.user_id})})),t}(e);console.log(t);var n=new Date,r=Object(a.useState)(n),o=Object(j.a)(r,2),i=o[0],c=o[1],l=Object(a.useState)(n),u=Object(j.a)(l,2),s=(u[0],u[1]),d=Object(a.useState)(i.getDate()),p=Object(j.a)(d,2),g=p[0],m=p[1],h=Object(a.useState)(i.getMonth()),f=Object(j.a)(h,2),v=f[0],E=f[1],x=Object(a.useState)(i.getFullYear()),w=Object(j.a)(x,2),O=w[0],y=w[1],_=Object(a.useState)(k(i)),S=Object(j.a)(_,2),D=S[0],G=S[1];Object(a.useEffect)((function(){m(i.getDate()),E(i.getMonth()),y(i.getFullYear()),G(k(i))}),[i]);var N=0;function k(e){return new Date(e.getFullYear(),e.getMonth(),1).getDay()}!function(e){for(var t=0;t<e.length;t+=1)e[t].date[1]===i.getMonth()+1&&e[t].date[0]===i.getFullYear()&&(N=0+e[t].price)}(t);var C=function(e){return e%4===0&&e%100!==0||e%400===0}(i.getFullYear())?[31,29,31,30,31,30,31,31,30,31,30,31]:[31,28,31,30,31,30,31,31,30,31,30,31];return a.createElement(z,null,a.createElement(F,null,a.createElement(b.b,null,"+"),a.createElement("div",null,a.createElement("div",{id:"header-month"},["Jan","Feb","March","April","May","June","July","August","Sept","Oct","Nov","Dec"][v]," ",O),a.createElement("div",{id:"gigs"},"Gigs $",N),a.createElement("div",{id:"header-year"})),a.createElement(b.b,{to:"/dashboard"},a.createElement("div",{id:"burger"},a.createElement("span",{className:"burger-span"}),a.createElement("span",{className:"burger-span"}),a.createElement("span",{className:"burger-span"})))),a.createElement(M,null,a.createElement(Y,null,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return a.createElement(A,{key:e},a.createElement("p",{className:"days-of-week"},e))})),Array(C[v]+D).fill().map((function(e,r){var o=r-(D-1),i=new Date(O,v,o),c=[],l=[],u=[];return t.map((function(e){e.date[2]===i.getDate()&&e.date[1]===i.getMonth()+1&&e.date[0]===i.getFullYear()&&(c.push("$"+e.price),l.push(e.title),u.push(e.id))})),a.createElement(a.Fragment,null,a.createElement(A,{key:r,isToday:o===n.getDate(),onClick:function(){return s(new Date(O,v,o))}},a.createElement("div",{className:"calendar-nums"},o>0&&o<32?o:"",u?a.createElement(q,{value:u},a.createElement("div",{className:"gig-title"},l),a.createElement("div",{className:"gig-price"},c)):"")))})))),a.createElement(J,null,a.createElement(P,{id:"prev-month",onClick:function(){return c(new Date(O,v-1,g))}},a.createElement("div",null,"-")),a.createElement($,{id:"next-month",onClick:function(){return c(new Date(O,v+1,g))}},a.createElement("div",null,"+"))))}n(68);function W(e){var t=Object(a.useContext)(H),n=t.activeUser.user,o=t.setActiveUser,i=n.email,c=new Date,l=function(e){var t=[];return e.forEach((function(e){t.push({client:e.client,client_contact:e.client_contact,created_at:e.created_at,date:e.date.split("-").map((function(e){return parseInt(e)})),id:e.id,location:e.location,price:e.price,time:e.time,title:e.title,updated_at:e.updated_at,user_id:e.user_id})})),t}(t.userGigs);console.log(l);var d=function(e){for(var t=0,n=0;n<e.length;n+=1)console.log(e[n].date[0]),console.log(e[n].price),c.getFullYear()===e[n].date[0]&&(t+=e[n].price);return t}(l),g=function(){var t=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.delete("".concat(x,"/logout"),{withCredentials:!0}).then((function(t){console.log("LOGGED OUT"),o({loggedInStatus:"NOT_LOGGED_IN",user:{}}),e.history.push("/")})).catch((function(e){console.log("logout error",e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=new Date,h=m.getMonth()+1+"/"+m.getDate()+"/"+m.getFullYear();return r.a.createElement("div",{id:"dash-wrapper"},r.a.createElement("div",{id:"dash-header"},r.a.createElement("h1",null,"Gig Dashboard"),r.a.createElement(b.b,{to:"/month"},r.a.createElement("div",{id:"burger"},r.a.createElement("span",{className:"burger-span"}),r.a.createElement("span",{className:"burger-span"}),r.a.createElement("span",{className:"burger-span"})))),r.a.createElement("div",{id:"dash-today"},r.a.createElement("h2",null,"Today:"),r.a.createElement("h3",null,h)),r.a.createElement("div",{id:"dash-year"},r.a.createElement("h2",null,"Gig Income This Year:"),r.a.createElement("h3",null,"$",d)),r.a.createElement("div",{id:"dash-logged"},r.a.createElement("h5",null,"Logged in with: "),r.a.createElement("h5",null,i," ")),r.a.createElement("button",{onClick:g},"Logout"))}var H=Object(a.createContext)();var K=Object(g.g)((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(x,"/logged_in"),{withCredentials:!0}).then((function(e){e.data.logged_in&&"NOT_LOGGED_IN"===o.loggedInStatus?(i({loggedInStatus:"LOGGED_IN",user:e.data.user}),f(e.data.user.gigs)):e.data.logged_in||"LOGGED_IN"!==o.loggedInStatus||i({loggedInStatus:"NOT_LOGGED_IN",user:{}}),console.log("within app, within checkLoginStatus:",o)})).catch((function(e){console.log("check login error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){e()}));var t=Object(a.useState)({loggedInStatus:"NOT_LOGGED_IN",user:{}}),n=Object(c.a)(t,2),o=n[0],i=n[1],l=Object(a.useState)([]),d=Object(c.a)(l,2),h=d[0],f=d[1];return r.a.createElement("div",{className:"App"},r.a.createElement(g.d,null,r.a.createElement(H.Provider,{value:{activeUser:o,setActiveUser:i,userGigs:h}},r.a.createElement(g.b,{exact:!0,path:"/",component:m}),r.a.createElement(g.b,{exact:!0,path:"/dashboard",component:W}),r.a.createElement(g.b,{exact:!0,path:"/signup",component:w}),r.a.createElement(g.b,{exact:!0,path:"/login",component:O}),r.a.createElement(g.b,{exact:!0,path:"/month",component:B}))))}));i.a.render(r.a.createElement(b.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e60eb164.chunk.js.map